<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Deboxe Customs - Mural de Parcerias</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="https://imgur.com/Nw9g2Q2.png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
:root{
  --vermelho:#e10600;
  --dourado:#ffcc00;
  --bg:#f7f9fb;
}

body{
  font-family:'Inter',sans-serif;
  background:var(--bg);
  color:#111;
  margin:0;
  padding-top:90px;
}

/* ===== TOPO ===== */
.topbar{
  background:linear-gradient(90deg,#000,#1a0000,#000);
  border-bottom:3px solid var(--vermelho);
  padding:14px 0;
  position:fixed;
  top:0;
  width:100%;
  z-index:1000;
}

.logo{
  font-weight:800;
  font-size:1.3rem;
  background:linear-gradient(135deg,var(--vermelho),var(--dourado));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* ===== CARD ===== */
.card{
  border-radius:18px;
  box-shadow:0 20px 40px rgba(0,0,0,.12);
}

.card-header{
  background:linear-gradient(135deg,var(--vermelho),var(--dourado));
  color:#000;
  font-weight:800;
  text-align:center;
  border-radius:18px 18px 0 0;
}

/* ===== CONTROLES ===== */
input, select{
  border-radius:12px!important;
  border:1px solid #ccc!important;
}

/* ===== TABELA ===== */
table{
  border-radius:14px;
  overflow:hidden;
}

th{
  background:#f1f1f1;
  font-weight:700;
}

.badge-oficial{
  background:linear-gradient(135deg,var(--vermelho),var(--dourado));
  color:#000;
  padding:6px 14px;
  border-radius:20px;
  font-weight:700;
}

.del{
  background:#dc2626;
  border:none;
  color:#fff;
  padding:6px 10px;
  border-radius:8px;
  cursor:pointer;
}

/* ===== ADMIN ===== */
.admin{
  display:none;
  margin-top:30px;
  border-top:2px dashed #ccc;
  padding-top:25px;
}
</style>
</head>

<body>

<header class="topbar">
  <div class="container d-flex align-items-center gap-3">
    <img src="https://imgur.com/Nw9g2Q2.png" height="55">
    <div class="logo">Deboxe Customs</div>
  </div>
</header>

<div class="container mt-4">

<div class="card">
<div class="card-header">
üìã Mural Oficial de Parcerias
</div>

<div class="card-body">

<div class="row mb-3">
  <div class="col-md-6">
    <input id="busca" class="form-control" placeholder="üîç Buscar nome" oninput="render()">
  </div>
  <div class="col-md-6">
    <select id="filtro" class="form-control" onchange="render()">
      <option value="">Todas</option>
      <option value="OFICIAL">Parcerias Oficiais</option>
    </select>
  </div>
</div>

<div class="table-responsive">
<table class="table table-bordered text-center">
<thead>
<tr>
  <th>Nome</th>
  <th>Grupo</th>
  <th>A√ß√£o</th>
</tr>
</thead>
<tbody id="lista"></tbody>
</table>
</div>

<div class="text-center mt-3">
<button class="btn btn-outline-dark" onclick="toggleAdmin()">Acesso Administrativo</button>
</div>

<div class="admin" id="admin">
<h5 class="mt-4">√Årea Administrativa</h5>
<input type="password" id="senha" class="form-control mb-2" placeholder="Senha admin">
<input id="nome" class="form-control mb-2" placeholder="Nome do integrante">
<input id="grupo" class="form-control mb-2" placeholder="Grupo (PM, PRF, BOPE...)">
<button class="btn btn-danger w-100" onclick="adicionar()">Adicionar ao mural</button>
</div>

<hr class="mt-4">

<h5>üéÅ Benef√≠cios para Parceiros</h5>
<ul>
<li>üîß Reparo totalmente gr√°tis</li>
<li>üí∏ 10% de desconto na tunagem</li>
</ul>

</div>
</div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCWy_SS9eOJq23sWCGWNvq9Tlk_XXvixoo",
  authDomain: "parceria-cc577.firebaseapp.com",
  projectId: "parceria-cc577",
  storageBucket: "parceria-cc577.firebasestorage.app",
  messagingSenderId: "48532625032",
  appId: "1:48532625032:web:b10581a2a533737f7f713d"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const SENHA = "admin123";
let dados = [];
let admin = false;

async function carregar(){
  dados=[];
  const snap = await getDocs(collection(db,"parcerias"));
  snap.forEach(d=>dados.push({id:d.id,...d.data()}));
  render();
}

window.render = function(){
  const lista=document.getElementById("lista");
  lista.innerHTML="";
  const busca=document.getElementById("busca").value.toLowerCase();
  const filtro=document.getElementById("filtro").value;

  dados
  .filter(d=>d.nome.toLowerCase().includes(busca))
  .filter(d=>filtro==="OFICIAL"?d.oficial:true)
  .forEach(d=>{
    lista.innerHTML+=`
    <tr>
      <td>${d.nome}</td>
      <td><span class="badge-oficial">${d.grupo}</span></td>
      <td>${admin?`<button class="del" onclick="remover('${d.id}')">üóëÔ∏è</button>`:""}</td>
    </tr>`;
  });
}

window.toggleAdmin=function(){
  const senha=prompt("Senha admin:");
  if(senha!==SENHA) return alert("Senha incorreta");
  admin=true;
  document.getElementById("admin").style.display="block";
  render();
}

window.adicionar=async function(){
  if(senha.value!==SENHA) return alert("Senha incorreta");
  if(!nome.value||!grupo.value) return alert("Preencha tudo");

  await addDoc(collection(db,"parcerias"),{
    nome:nome.value,
    grupo:grupo.value,
    oficial:true
  });

  nome.value="";
  grupo.value="";
  senha.value="";
  carregar();
}

window.remover=async function(id){
  if(!confirm("Remover este nome?")) return;
  await deleteDoc(doc(db,"parcerias",id));
  carregar();
}

carregar();
</script>

</body>
</html>
