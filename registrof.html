<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Mural Oficial de Parcerias</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #020617, #0f172a);
    color: #fff;
    display: flex;
    justify-content: center;
}

.container {
    width: 100%;
    max-width: 950px;
    margin: 30px;
    background: rgba(2,6,23,.96);
    border-radius: 18px;
    padding: 30px;
    box-shadow: 0 0 60px rgba(0,0,0,.7);
}

.header {
    text-align: center;
    margin-bottom: 25px;
}

.header h1 {
    margin: 0;
    font-size: 30px;
}

.header p {
    opacity: .8;
    margin-top: 6px;
}

.controls {
    display: flex;
    gap: 10px;
    margin-bottom: 18px;
}

.controls input,
.controls select {
    flex: 1;
    padding: 12px;
    background: #020617;
    border: 1px solid #334155;
    border-radius: 10px;
    color: #fff;
}

table {
    width: 100%;
    border-collapse: collapse;
    border-radius: 14px;
    overflow: hidden;
}

th, td {
    padding: 14px;
    text-align: center;
}

th {
    background: #020617;
    border-bottom: 1px solid #334155;
}

tr:nth-child(even) {
    background: rgba(255,255,255,.03);
}

.badge {
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
}

.OFICIAL {
    background: linear-gradient(135deg, #16a34a, #22c55e);
    box-shadow: 0 0 12px rgba(34,197,94,.6);
}

.del {
    background: #dc2626;
    border: none;
    padding: 6px 10px;
    border-radius: 8px;
    cursor: pointer;
    color: #fff;
}

.admin-toggle {
    margin-top: 25px;
    text-align: center;
}

.admin-toggle button {
    background: transparent;
    border: 1px dashed #475569;
    color: #94a3b8;
    padding: 9px 18px;
    border-radius: 12px;
    cursor: pointer;
}

.admin {
    display: none;
    margin-top: 30px;
    border-top: 1px solid #334155;
    padding-top: 25px;
}

.admin input {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    background: #020617;
    border: 1px solid #334155;
    border-radius: 10px;
    color: #fff;
}

.admin button {
    margin-top: 14px;
    width: 100%;
    background: #2563eb;
    color: #fff;
    padding: 12px;
    border-radius: 10px;
    border: none;
    font-weight: bold;
    cursor: pointer;
}

.beneficios {
    margin-top: 40px;
    padding: 24px;
    border: 1px solid #334155;
    border-radius: 16px;
    background: rgba(15,23,42,.6);
}

.beneficios h3 {
    margin-top: 0;
    color: #38bdf8;
}

.beneficios ul {
    list-style: none;
    padding: 0;
}

.beneficios li {
    margin-bottom: 8px;
}

.beneficios .obs {
    font-size: 13px;
    opacity: .85;
}
</style>
</head>

<body>
<div class="container">

<div class="header">
    <h1>üìã Mural Oficial de Parcerias</h1>
    <p>Lista p√∫blica de integrantes e parcerias ativas</p>
</div>

<div class="controls">
    <input id="busca" placeholder="üîç Buscar nome" oninput="render()">
    <select id="filtro" onchange="render()">
        <option value="">Todas</option>
        <option value="OFICIAL">Parcerias Oficiais</option>
    </select>
</div>

<table>
<thead>
<tr>
    <th>Nome</th>
    <th>Grupo</th>
    <th></th>
</tr>
</thead>
<tbody id="lista"></tbody>
</table>

<div class="admin-toggle">
    <button onclick="toggleAdmin()">Acesso Administrativo</button>
</div>

<div class="admin" id="admin">
    <h3>√Årea Administrativa</h3>
    <input type="password" id="senha" placeholder="Senha admin">
    <input id="nome" placeholder="Nome do integrante">
    <input id="grupo" placeholder="Grupo (PM, PRF, BOPE, etc)">
    <button onclick="adicionar()">Adicionar ao mural</button>
</div>

<div class="beneficios">
    <h3>üéÅ Benef√≠cios para Parceiros</h3>
    <ul>
        <li>üîß Reparo totalmente gr√°tis</li>
        <li>üí∏ 10% de desconto na tunagem</li>
    </ul>
    <p class="obs">
        ‚ÑπÔ∏è Para receber os benef√≠cios, √© necess√°rio fazer parte do grupo parceiro e estar na lista.<br>
        ‚ö†Ô∏è Caso n√£o esteja na lista, mas esteja fardado com a roupa oficial do grupo, os benef√≠cios poder√£o ser concedidos.
    </p>
</div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCWy_SS9eOJq23sWCGWNvq9Tlk_XXvixoo",
  authDomain: "parceria-cc577.firebaseapp.com",
  projectId: "parceria-cc577",
  storageBucket: "parceria-cc577.firebasestorage.app",
  messagingSenderId: "48532625032",
  appId: "1:48532625032:web:b10581a2a533737f7f713d"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const SENHA = "admin123";
let dados = [];
let admin = false;

async function carregar() {
    dados = [];
    const snap = await getDocs(collection(db, "parcerias"));
    snap.forEach(d => dados.push({ id: d.id, ...d.data() }));
    render();
}

window.render = function () {
    const lista = document.getElementById("lista");
    lista.innerHTML = "";

    const busca = document.getElementById("busca").value.toLowerCase();
    const filtro = document.getElementById("filtro").value;

    dados
    .filter(d => d.nome.toLowerCase().includes(busca))
    .filter(d => filtro === "OFICIAL" ? d.oficial === true : true)
    .forEach(d => {
        lista.innerHTML += `
        <tr>
            <td>${d.nome}</td>
            <td><span class="badge OFICIAL">${d.grupo}</span></td>
            <td>${admin ? `<button class="del" onclick="remover('${d.id}')">üóëÔ∏è</button>` : ""}</td>
        </tr>`;
    });
};

window.toggleAdmin = function () {
    const senha = prompt("Senha admin:");
    if (senha !== SENHA) return alert("Senha incorreta");
    admin = true;
    document.getElementById("admin").style.display = "block";
    render();
};

window.adicionar = async function () {
    const nome = nomeInput.value.trim();
    const grupo = grupoInput.value.trim();
    const senha = senhaInput.value;

    if (senha !== SENHA) return alert("Senha incorreta");
    if (!nome || !grupo) return alert("Preencha tudo");

    if (dados.some(d => d.nome.toLowerCase() === nome.toLowerCase())) {
        return alert("Nome duplicado");
    }

    await addDoc(collection(db, "parcerias"), {
        nome,
        grupo,
        oficial: true
    });

    nomeInput.value = "";
    grupoInput.value = "";
    senhaInput.value = "";
    carregar();
};

window.remover = async function (id) {
    if (!confirm("Remover este nome?")) return;
    await deleteDoc(doc(db, "parcerias", id));
    carregar();
};

const nomeInput = document.getElementById("nome");
const grupoInput = document.getElementById("grupo");
const senhaInput = document.getElementById("senha");

carregar();
</script>

</body>
</html>
