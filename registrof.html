<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Mural Oficial de Parcerias</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #020617, #0f172a);
    color: #fff;
    display: flex;
    justify-content: center;
}

.container {
    width: 100%;
    max-width: 850px;
    margin: 25px;
    background: rgba(2,6,23,.95);
    border-radius: 14px;
    padding: 25px;
    box-shadow: 0 0 40px rgba(0,0,0,.6);
}

.header {
    text-align: center;
    margin-bottom: 20px;
}

.header h1 {
    margin: 0;
    font-size: 26px;
}

.header p {
    opacity: .8;
    margin-top: 5px;
}

.controls {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.controls input,
.controls select {
    flex: 1;
    padding: 10px;
    background: #020617;
    border: 1px solid #334155;
    border-radius: 8px;
    color: #fff;
}

table {
    width: 100%;
    border-collapse: collapse;
    overflow: hidden;
    border-radius: 10px;
}

th, td {
    padding: 12px;
    text-align: center;
}

th {
    background: #020617;
    border-bottom: 1px solid #334155;
}

tr:nth-child(even) {
    background: rgba(255,255,255,.03);
}

.badge {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
}

.PM { background: #1e40af; }
.PRF { background: #065f46; }
.Parceria { background: #7c2d12; }

.admin-toggle {
    margin-top: 20px;
    text-align: center;
}

.admin-toggle button {
    background: transparent;
    border: 1px dashed #334155;
    color: #94a3b8;
    padding: 8px 14px;
    border-radius: 8px;
    cursor: pointer;
}

.admin {
    display: none;
    margin-top: 20px;
    border-top: 1px solid #334155;
    padding-top: 20px;
}

.admin input, .admin select {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    background: #020617;
    border: 1px solid #334155;
    border-radius: 8px;
    color: #fff;
}

.admin button {
    margin-top: 10px;
    width: 100%;
    background: #2563eb;
    color: #fff;
    padding: 10px;
    border-radius: 8px;
    border: none;
    font-weight: bold;
    cursor: pointer;
}

.del {
    background: #dc2626;
    border: none;
    padding: 6px 10px;
    border-radius: 6px;
    cursor: pointer;
    color: #fff;
}
</style>
</head>
<body>

<div class="container">
<div class="header">
    <h1>üìã Mural Oficial de Parcerias</h1>
    <p>Lista p√∫blica de integrantes e parcerias ativas</p>
</div>

<div class="controls">
    <input id="busca" placeholder="üîç Buscar nome" oninput="render()">
    <select id="filtro" onchange="render()">
        <option value="">Todas</option>
        <option value="PM">PM</option>
        <option value="PRF">PRF</option>
        <option value="Parceria">Parceria</option>
    </select>
</div>

<table>
<thead>
<tr>
    <th>Nome</th>
    <th>JOAO BRITTO</th>
    <th></th>
</tr>
</thead>
<tbody id="lista"></tbody>
</table>

<div class="admin-toggle">
    <button onclick="toggleAdmin()">Acesso Admin</button>
</div>

<div class="admin" id="admin">
    <h3>√Årea Administrativa</h3>

    <input type="password" id="senha" placeholder="Senha admin">
    <input id="nome" placeholder="Nome">
    <select id="parceria">
        <option value="">Selecione</option>
        <option value="PM">PM</option>
        <option value="PRF">PRF</option>
        <option value="Parceria">Parceria</option>
    </select>

    <button onclick="adicionar()">Adicionar</button>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore,
  collection,
  addDoc,
  getDocs,
  deleteDoc,
  doc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCWy_SS9eOJq23sWCGWNvq9Tlk_XXvixoo",
  authDomain: "parceria-cc577.firebaseapp.com",
  projectId: "parceria-cc577",
  storageBucket: "parceria-cc577.firebasestorage.app",
  messagingSenderId: "48532625032",
  appId: "1:48532625032:web:b10581a2a533737f7f713d"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const SENHA = "admin123";
let dados = [];
let adminLiberado = false;

async function carregar() {
    dados = [];
    const snap = await getDocs(collection(db, "parcerias"));
    snap.forEach(d => dados.push({ id: d.id, ...d.data() }));
    render();
}

window.render = function () {
    const lista = document.getElementById("lista");
    lista.innerHTML = "";

    const busca = buscaInput.value.toLowerCase();
    const filtro = filtroInput.value;

    dados.filter(d =>
        d.nome.toLowerCase().includes(busca) &&
        (filtro === "" || d.parceria === filtro)
    ).forEach(d => {
        lista.innerHTML += `
        <tr>
            <td>${d.nome}</td>
            <td><span class="badge ${d.parceria}">${d.parceria}</span></td>
            <td>${adminLiberado ? `<button class="del" onclick="remover('${d.id}')">üóëÔ∏è</button>` : ""}</td>
        </tr>`;
    });
};

window.toggleAdmin = function () {
    const senha = prompt("Senha admin:");
    if (senha !== SENHA) return alert("Senha incorreta");

    adminLiberado = true;
    document.getElementById("admin").style.display = "block";
    render();
};

window.adicionar = async function () {
    const nome = nomeInput.value.trim();
    const parceria = parceriaSelect.value;
    const senha = senhaInput.value;

    if (senha !== SENHA) return alert("Senha incorreta");
    if (!nome || !parceria) return alert("Preencha tudo");

    if (dados.some(d => d.nome.toLowerCase() === nome.toLowerCase())) {
        return alert("Nome j√° existe");
    }

    await addDoc(collection(db, "parcerias"), { nome, parceria });

    nomeInput.value = "";
    parceriaSelect.value = "";
    senhaInput.value = "";

    carregar();
};

window.remover = async function (id) {
    if (!confirm("Remover este nome?")) return;
    await deleteDoc(doc(db, "parcerias", id));
    carregar();
};

const buscaInput = document.getElementById("busca");
const filtroInput = document.getElementById("filtro");
const nomeInput = document.getElementById("nome");
const parceriaSelect = document.getElementById("parceria");
const senhaInput = document.getElementById("senha");

carregar();
</script>

</body>
</html>

