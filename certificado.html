<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Gerador de Certificado - Deboxe Customs</title>
<link rel="icon" type="image/x-icon" href="https://imgur.com/0iskhD3.png">

<!-- Bootstrap 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Font Awesome -->
<script src="https://kit.fontawesome.com/a2d9b1d7a1.js" crossorigin="anonymous"></script>
<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --preto:#0b0b0b;
  --vermelho:#e10600;
  --vermelho-claro:#ff2a1a;
  --amarelo:#ffcc00;
  --dourado:#ffb300;
}

body {
  font-family: 'Inter', system-ui, sans-serif;
  background: #f5f6f8;
  user-select: none;
}

/* ===== TOPO / MENU ===== */
.topbar {
  background: linear-gradient(90deg, #000 0%, #140000 40%, #1a0000 100%);
  padding: 14px 0;
  border-bottom: 2px solid var(--vermelho);
  box-shadow: 0 6px 18px rgba(0,0,0,.6);
}

.logo {
  font-weight: 800;
  font-size: 1.25rem;
  letter-spacing: .5px;
  background: linear-gradient(135deg, var(--vermelho), var(--amarelo));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.nav-links a {
  color: #f1f1f1;
  text-decoration: none;
  margin-left: 22px;
  font-weight: 600;
  position: relative;
  transition: .25s;
}

.nav-links a::after{
  content:"";
  position:absolute;
  left:0;
  bottom:-6px;
  width:0%;
  height:2px;
  background: linear-gradient(90deg,var(--vermelho),var(--amarelo));
  transition:.25s;
}

.nav-links a:hover{
  color: var(--amarelo);
}

.nav-links a:hover::after{
  width:100%;
}

/* ===== CARD ===== */
.card-cert {
  max-width: 420px;
  margin: 70px auto;
  border-radius: 20px;
  box-shadow: 0 14px 35px rgba(0,0,0,.18);
  border-top: 4px solid var(--vermelho);
}

.card-cert h3 {
  font-weight: 800;
}

/* ===== BOT√ÉO ===== */
.btn-gerar {
  background: linear-gradient(135deg, var(--vermelho), var(--amarelo));
  border: none;
  font-weight: 800;
  color: #000;
  border-radius: 14px;
  box-shadow: 0 8px 22px rgba(225,6,0,.35);
  transition: .25s;
}

.btn-gerar:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 14px 32px rgba(255,204,0,.45);
}
</style>
</head>

<body>

<header class="topbar">
  <div class="container d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center gap-3">
      <img src="https://imgur.com/0iskhD3.png" style="height:60px;border-radius:8px" draggable="false">
      <div class="logo">Deboxe Customs</div>
    </div>
    <nav class="d-none d-md-flex align-items-center nav-links">
      <a href="index.html">In√≠cio</a>
      <a href="tabela.html">Pre√ßos</a>
      <a href="funcionarios.html">Funcion√°rios</a>
    </nav>
  </div>
</header>

<div class="card card-cert">
  <div class="card-body p-4">
    <h3 class="text-center mb-4">Gerador de Certificado</h3>

    <form id="certForm">
      <input class="form-control mb-3" type="text" name="nome" placeholder="Nome do aluno" required onpaste="return false">
      <input class="form-control mb-3" type="text" name="instrutor" placeholder="Nome do instrutor" required onpaste="return false">
      <input class="form-control mb-4" type="text" name="curso" placeholder="Nome do curso" required onpaste="return false">

      <button class="btn btn-gerar w-100 py-2" type="submit">
        <i class="fa-solid fa-file-pdf"></i> Gerar Certificado
      </button>
    </form>
  </div>
</div>

<script>
// Bloqueia bot√£o direito
document.addEventListener('contextmenu', e => e.preventDefault());

// Bloqueia Ctrl+C, Ctrl+V e Ctrl+X
document.addEventListener('keydown', function(e){
  if(e.ctrlKey && (e.key === 'c' || e.key === 'v' || e.key === 'x')){
    e.preventDefault();
    alert('A√ß√£o n√£o permitida!');
  }
});

document.getElementById('certForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({orientation:'landscape',unit:'mm',format:'a4'});

  const nome = this.nome.value;
  const instrutor = this.instrutor.value;
  const curso = this.curso.value;

  doc.setFillColor(255,255,255);
  doc.rect(0,0,297,210,'F');
  doc.setDrawColor(180);
  doc.setLineWidth(1.2);
  doc.rect(10,10,277,190);

  doc.setFont('times','bold');
  doc.setFontSize(42);
  doc.text('CERTIFICADO',148.5,40,{align:'center'});

  doc.setFont('times','normal');
  doc.setFontSize(18);
  doc.text('Concedemos esse Certificado a(o)',148.5,65,{align:'center'});

  doc.setFont('times','bold');
  doc.setFontSize(28);
  doc.text(nome,148.5,82,{align:'center'});

  const imgUrl = 'https://imgur.com/UX64xoQ.png';
  try{
    const imgBlob = await fetch(imgUrl).then(r=>r.blob());
    const reader = new FileReader();
    reader.onloadend = () => {
      doc.addImage(reader.result,'PNG',122.5,86,52,52);
      finalizar();
    };
    reader.readAsDataURL(imgBlob);
  }catch{
    finalizar();
  }

  function finalizar(){
    doc.setFontSize(18);
    doc.text(`concluiu o curso de ${curso},`,148.5,135,{align:'center'});
    doc.text('ministrado pela empresa Deboxe Customs.',148.5,148,{align:'center'});

    doc.line(90,165,207,165);
    doc.setFont('times','italic');
    doc.text(instrutor,148.5,160,{align:'center'});
    doc.setFont('times','normal');
    doc.setFontSize(14);
    doc.text('INSTRUTOR(A)',148.5,180,{align:'center'});

    enviarParaDiscord(doc,nome,instrutor,curso);
  }
});

function enviarParaDiscord(pdfDoc,nome,instrutor,curso){
  const blob = pdfDoc.output('blob');
  const webhookURL = "COLOQUE_SEU_WEBHOOK_AQUI";

  const file = new File([blob], `${nome}-certificado.pdf`, { type: 'application/pdf' });
  const formData = new FormData();
  formData.append('file', file);

  formData.append('payload_json', JSON.stringify({
    content:
`üéâ **Certificado Gerado**
üè¢ **Deboxe Customs**
üéì **Curso:** ${curso}
üë§ **Aluno:** ${nome}
üë®‚Äçüè´ **Instrutor:** ${instrutor}`
  }));

  fetch(webhookURL,{method:'POST',body:formData})
    .then(res => res.ok ? alert('Certificado enviado!') : alert('Erro ao enviar.'));
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
