<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Deboxe Customs - Mural de Parcerias</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="https://imgur.com/Nw9g2Q2.png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://kit.fontawesome.com/a2d9b1d7a1.js" crossorigin="anonymous"></script>

<style>
:root{
  --vermelho:#e10600;
  --dourado:#ffcc00;
  --bg:#ffffff;
}

body{
  font-family:'Inter',sans-serif;
  background:var(--bg);
  color:#111;
  margin:0;
  padding-top:90px;
  user-select:none;
  display:flex;
  justify-content:center;
}

.container-mural{ max-width:1000px; width:100%; }

/* ===== TOPBAR ===== */
.topbar{
  background:linear-gradient(90deg,#000,#1a0000,#000);
  border-bottom:3px solid var(--vermelho);
  padding:14px 0;
  position:fixed;
  top:0;
  width:100%;
  z-index:1000;
}

.logo{
  font-weight:800;
  font-size:1.3rem;
  background:linear-gradient(135deg,var(--vermelho),var(--dourado));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.nav-links a{
  color:#fff;
  margin-left:20px;
  font-weight:600;
  text-decoration:none;
  position:relative;
}
.nav-links a::after{
  content:"";
  position:absolute;
  bottom:-6px;
  left:0;
  width:0;
  height:2px;
  background:linear-gradient(90deg,var(--vermelho),var(--dourado));
  transition:.3s;
}
.nav-links a:hover::after{width:100%}

.discord-btn{
  margin-left:25px;
  padding:8px 16px;
  border-radius:14px;
  font-weight:700;
  background:linear-gradient(135deg,var(--vermelho),var(--dourado));
  color:#000;
  text-decoration:none;
}

/* ===== CARD ===== */
.card{
  border-radius:18px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
}

.card-header{
  background: linear-gradient(135deg,var(--vermelho),var(--dourado));
  color:#000;
  font-weight:900;
  text-align:center;
  font-size:1.5rem;
  letter-spacing:1px;
  border-radius:18px 18px 0 0;
}

/* ===== GRUPO ===== */
.group-name{
  font-weight:900;
  font-size:1.5rem;
  letter-spacing:1px;
  text-transform:uppercase;
  background:linear-gradient(135deg,#e10600,#ffcc00);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  display:inline-block;
  transition: transform .3s ease, filter .3s ease, text-shadow .3s ease;
}
.group-name:hover{
  transform: scale(1.15);
  filter: brightness(1.3);
  text-shadow: 0 0 10px #ffcc00, 0 0 20px #e10600;
}

/* ===== TABELA ===== */
.table{
  background:#f7f7f7;
  border-radius:16px;
  overflow:hidden;
}
thead{ background:#e10600; color:#ffcc00; font-weight:700; font-size:1rem; }
tbody tr{ transition:background .2s ease, transform .2s ease; }
tbody tr:hover{ background:rgba(225,6,0,0.1); transform:scale(1.01); }

.del,.edit{
  border:none;
  color:#fff;
  padding:6px 10px;
  border-radius:8px;
  cursor:pointer;
}
.del{background:#dc2626;}
.edit{background:#1a73e8;margin-right:5px;}

/* ===== ADMIN ===== */
.admin{ display:none; margin-top:30px; border-top:2px dashed #ffcc00; padding:20px; border-radius:16px; background:#f0f0f0; }

input, select{
  background:#fff;
  color:#111;
  border:2px solid #e10600;
  border-radius:12px;
  padding:10px;
  margin-bottom:10px;
}

.btn-gradient{
  font-weight:700;
  border-radius:14px;
  color:#000;
  padding:10px 20px;
  margin:5px;
}
</style>
</head>
<body>

<!-- ===== TOPBAR ===== -->
<header class="topbar">
  <div class="container d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center gap-3">
      <img src="https://imgur.com/Nw9g2Q2.png" height="55" alt="Deboxe Logo">
      <div class="logo">Deboxe Customs</div>
    </div>
    <nav class="d-none d-md-flex align-items-center nav-links">
      <a href="#">In√≠cio</a>
      <a href="#">Pre√ßos</a>
      <a href="#">Funcion√°rios</a>
      <a href="https://discord.gg/Z72tjMRmUX" class="discord-btn">
        <i class="fa-brands fa-discord"></i> Discord
      </a>
    </nav>
  </div>
</header>

<!-- ===== MURAL ===== -->
<div class="container-mural mt-5">
  <div class="card">
    <div class="card-header">üìã Mural Oficial de Parcerias</div>
    <div class="card-body">

      <div class="row mb-4">
        <div class="col-md-12 mb-2">
          <input id="busca" class="form-control" placeholder="üîç Buscar grupo" oninput="render()">
        </div>
      </div>

      <div class="table-responsive">
        <table class="table table-bordered text-center align-middle">
          <thead>
            <tr>
              <th>GRUPO</th>
              <th>BENEF√çCIO</th>
              <th>DEVER</th>
              <th>CHAVE DE ACESSO</th>
              <th>A√á√ÉO</th>
            </tr>
          </thead>
          <tbody id="lista"></tbody>
        </table>
      </div>

      <div class="text-center mt-4">
        <button class="btn btn-gradient" style="background:linear-gradient(135deg,#e10600,#ffcc00);" onclick="toggleAdmin()">Acesso Gerencia</button>
        <button class="btn btn-gradient" style="background:linear-gradient(135deg,#ffcc00,#e10600);" onclick="toggleMecanico()">Acesso Mec√¢nico</button>
      </div>

      <div class="admin mt-4" id="admin">
        <h5 style="color:#e10600;">√Årea Administrativa</h5>
        <input type="password" id="senha" placeholder="Senha admin">
        <input id="grupo" placeholder="Nome do grupo">
        <input id="beneficio" placeholder="Benef√≠cio">
        <input id="dever" placeholder="Dever">
        <input id="chave" placeholder="Chave de Acesso">
        <button class="btn btn-gradient w-100" style="background:linear-gradient(135deg,#e10600,#ffcc00);" onclick="adicionar()">Salvar</button>
      </div>

    </div>
  </div>
</div>

<!-- ===== FIREBASE ===== -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc, query, where } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCWy_SS9eOJq23sWCGWNvq9Tlk_XXvixoo",
  authDomain: "parceria-cc577.firebaseapp.com",
  projectId: "parceria-cc577"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// üîí Senhas ofuscadas
const hash = s => s.split('').map(c=>c.charCodeAt(0)+1).join('-');
const SENHA_HASH = hash("gerencia456");
const SENHA_MECANICO_HASH = hash("mecanicorace26");

function checkSenha(input, hashReal){
    return hash(input) === hashReal;
}

let dados = [], admin = false, mecanico = false;

const lista = document.getElementById("lista");
const busca = document.getElementById("busca");
const adminDiv = document.getElementById("admin");
const grupo = document.getElementById("grupo");
const beneficio = document.getElementById("beneficio");
const dever = document.getElementById("dever");
const chave = document.getElementById("chave");
const senha = document.getElementById("senha");

async function carregar(){
  dados = [];
  const snap = await getDocs(collection(db,"parcerias"));
  snap.forEach(d=>dados.push({id:d.id,...d.data()}));
  render();
}

window.render = function(){
  lista.innerHTML="";
  const b = busca.value.toLowerCase();
  dados.filter(d=>d.grupo.toLowerCase().includes(b))
  .forEach(d=>{
    lista.innerHTML+=`
      <tr>
        <td><span class="group-name">${d.grupo}</span></td>
        <td>${d.beneficio}</td>
        <td>${d.dever}</td>
        <td>${(admin || mecanico)?(d.chave||''):'üîí'}</td>
        <td>${admin?`<button class="edit" onclick="editar('${d.id}')">‚úèÔ∏è</button><button class="del" onclick="remover('${d.id}')">üóëÔ∏è</button>`:''}</td>
      </tr>`;
  });
}

window.toggleAdmin=function(){
  const input = prompt("Senha admin:");
  if(!checkSenha(input,SENHA_HASH)) return alert("Senha incorreta");
  admin=true;
  adminDiv.style.display="block";
  render();
}

window.toggleMecanico=function(){
  const input = prompt("Senha mec√¢nico:");
  if(!checkSenha(input,SENHA_MECANICO_HASH)) return alert("Senha incorreta");
  mecanico=true;
  alert("Acesso mec√¢nico liberado! Voc√™ agora pode ver as chaves de acesso.");
  render();
}

window.adicionar=async function(){
  if(senha.value!=="" && !checkSenha(senha.value,SENHA_HASH) || !grupo.value || !beneficio.value || !dever.value) 
    return alert("Preencha tudo corretamente");
  
  const q=query(collection(db,"parcerias"),where("grupo","==",grupo.value));
  const snap=await getDocs(q);
  if(!snap.empty){
    snap.forEach(async d=>{
      await updateDoc(doc(db,"parcerias",d.id),{
        beneficio: beneficio.value,
        dever: dever.value,
        chave: chave.value
      });
    });
  }else{
    await addDoc(collection(db,"parcerias"),{
      grupo: grupo.value,
      beneficio: beneficio.value,
      dever: dever.value,
      chave: chave.value
    });
  }
  grupo.value=beneficio.value=dever.value=chave.value=senha.value="";
  carregar();
}

window.remover=async function(id){
  if(confirm("Remover?")){
    await deleteDoc(doc(db,"parcerias",id));
    carregar();
  }
}

window.editar=function(id){
  const d=dados.find(x=>x.id===id);
  if(!d) return;
  grupo.value=d.grupo;
  beneficio.value=d.beneficio;
  dever.value=d.dever;
  chave.value=d.chave||"";
}

carregar();
</script>

<!-- ===== BLOQUEIO DE COPIAR + IMAGENS ===== -->
<script>
function bloquearCopiar(){
    const isMobile = /Mobi|Android|iPhone|iPad/i.test(navigator.userAgent);

    // Bloqueios gerais
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("keydown", e => {
        if(e.key === "F12") e.preventDefault();
        if(e.ctrlKey && e.shiftKey && ["I","J","C"].includes(e.key.toUpperCase())) e.preventDefault();
        if(e.ctrlKey && ["u","s","c"].includes(e.key.toLowerCase())) e.preventDefault();
    });
    document.addEventListener("copy", e => e.preventDefault());
    document.addEventListener("cut", e => e.preventDefault());
    document.body.addEventListener("selectstart", e => e.preventDefault());

    // Bloqueio de imagens
    const imgs = document.querySelectorAll("img");
    imgs.forEach(img=>{
        img.addEventListener("dragstart", e => e.preventDefault());
        img.addEventListener("mousedown", e => e.preventDefault());
        img.addEventListener("touchstart", e => e.preventDefault(), {passive:false});
        img.addEventListener("contextmenu", e => e.preventDefault());
    });

    // Bloqueio toque longo em mobile
    if(isMobile){
        document.body.addEventListener("touchend", e=>{
            window.getSelection().removeAllRanges();
        });
    }
}
bloquearCopiar();
</script>

</body>
</html>
