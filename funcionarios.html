<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Central Race - Funcion√°rios</title>

<link rel="icon" type="image/x-icon" href="https://imgur.com/0iskhD3.png">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://kit.fontawesome.com/a2d9b1d7a1.js" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body{font-family:Inter;background:#f7f7f7}
.topbar{background:#2b2f33;color:#fff;padding:12px 0}
.logo{font-weight:700;letter-spacing:.6px}
.nav-links a{color:#fff;text-decoration:none;margin-left:18px;font-weight:600}
.nav-links a:hover{color:#cfcfcf}
.discord-btn{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;border-radius:12px;background:linear-gradient(135deg,#7289da,#99a9f0);color:#fff;font-weight:700;text-decoration:none}

.container-box{max-width:900px;margin:40px auto}
.card{border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
.func-card{display:flex;align-items:center;gap:15px}
.func-card img{width:70px;height:70px;border-radius:10px;object-fit:cover}
.remove-btn{color:#f44336;cursor:pointer;font-weight:700}
</style>
</head>

<body>

<!-- MENU -->
<header class="topbar">
<div class="container d-flex justify-content-between align-items-center">
<div class="d-flex align-items-center gap-3">
<img src="https://imgur.com/0iskhD3.png" style="height:60px;border-radius:8px">
<div class="logo">Central Race</div>
</div>

<nav class="d-none d-md-flex align-items-center nav-links">
<a href="index.html">In√≠cio</a>
<a href="tabela.html">Pre√ßos</a>
<a href="relatorio.html">Relat√≥rio</a>
<a href="funcionarios.html">Funcion√°rios</a>
<a href="https://discord.gg/YuUsJGfH" target="_blank" class="discord-btn">
<i class="fa-brands fa-discord"></i> Discord
</a>
</nav>
</div>
</header>

<!-- CONTE√öDO -->
<div class="container-box">

<h3 class="text-center mb-4">üë• Funcion√°rios</h3>

<div class="card p-4 mb-4">
<h5>√Årea Administrativa</h5>

<input id="senhaAdmin" class="form-control mb-2" placeholder="Senha do admin">
<input id="nome" class="form-control mb-2" placeholder="Nome do funcion√°rio">
<select id="cargo" class="form-control mb-2">
<option>Mec√¢nico</option>
<option>L√≠der</option>
<option>Sub L√≠der</option>
<option>Gerente</option>
<option>Supervisor de Turnagem</option>
<option>Turnagem</option>
<option>Reparo</option>
</select>
<input id="foto" class="form-control mb-2" placeholder="URL da foto">

<button class="btn btn-success w-100" onclick="adicionar()">Adicionar vaga</button>
</div>

<div id="lista"></div>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyD2zieCD4d-_olcWE6O0QlepyxWLGhyI",
  authDomain: "centralrace-c4ad0.firebaseapp.com",
  projectId: "centralrace-c4ad0",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const SENHA_ADMIN = "admin123";
const SENHA_REMOVER = "remover123";

window.adicionar = async () => {
  if (senhaAdmin.value !== SENHA_ADMIN) {
    alert("Senha admin incorreta");
    return;
  }

  if (!nome.value || !foto.value) {
    alert("Preencha tudo");
    return;
  }

  await addDoc(collection(db, "vagas"), {
    nome: nome.value,
    cargo: cargo.value,
    foto: foto.value
  });

  nome.value = "";
  foto.value = "";
};

const lista = document.getElementById("lista");

onSnapshot(collection(db, "vagas"), snap => {
  lista.innerHTML = "";
  snap.forEach(docu => {
    const v = docu.data();
    lista.innerHTML += `
    <div class="card p-3 mb-3">
      <div class="func-card">
        <img src="${v.foto}">
        <div>
          <strong>${v.nome}</strong><br>
          <small>${v.cargo}</small>
        </div>
        <div class="ms-auto remove-btn" onclick="remover('${docu.id}')">‚ùå Remover</div>
      </div>
    </div>
    `;
  });
});

window.remover = async (id) => {
  const senha = prompt("Digite a senha para remover:");
  if (senha !== SENHA_REMOVER) {
    alert("Senha incorreta");
    return;
  }
  if (!confirm("Tem certeza?")) return;
  await deleteDoc(doc(db, "vagas", id));
};
</script>

</body>
</html>
